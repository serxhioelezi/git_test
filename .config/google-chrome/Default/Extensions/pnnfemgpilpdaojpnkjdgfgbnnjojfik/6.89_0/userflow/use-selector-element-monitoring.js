import{r as e}from"./vendor.react.js";import{o as t,e as n,h as r,j as o,r as s,k as c,l as i,a as u,g as a}from"./flow-condition-types.js";let l=!1;const m=[];let f,v=[];function h(e){v.push(e)}function d(){m.forEach((e=>e())),v.length>0&&(v.forEach((e=>e())),v=[]),E()}function E(){l&&(f=window.requestAnimationFrame(d))}function g(){}function p({selector:c,targetMoved:i,targetLost:u,onTargetClick:a,onTargetMouseEnter:v,onTargetMouseLeave:h}){const d=e.useRef(i),p=e.useRef(u),w=e.useRef(a),M=e.useRef(v),R=e.useRef(h);e.useLayoutEffect((()=>{d.current=i,p.current=u,w.current=a,M.current=v,R.current=h})),e.useLayoutEffect((()=>{let e=null,i=null,u=null,a=!1;const v=()=>{e=null,i=null,u=null,p.current()};if(!c)return void v();const h=()=>{if(!u||!e)return;const t=s(e);var n,r;i&&(r=t,(n=i).left===r.left&&n.top===r.top&&n.width===r.width&&n.height===r.height)||(i=t,0===t.width&&0===t.height?v():d.current({targetEl:e,targetRect:i,clipEl:u,viewportClipRect:L(u)}))};let k=!1;const x=()=>{var e;k||(k=!0,e=h,m.push(e),1===m.length&&(l=!0,E(),window.addEventListener("scroll",g)))},b=()=>{k&&(k=!1,function(e){const t=m.indexOf(e);t>=0&&(m.splice(t,1),0===m.length&&(l=!1,window.cancelAnimationFrame(f),window.removeEventListener("scroll",g)))}(h))},j=()=>{w.current&&w.current()},y=()=>{M.current&&M.current()},T=()=>{R.current&&R.current()},A=()=>{const t=e;e=n(c)?c:r(c),a&&e===t||(t&&(t.removeEventListener("click",j),t.removeEventListener("mouseenter",y),t.removeEventListener("mouseleave",T)),e?(x(),e.addEventListener("click",j),e.addEventListener("mouseenter",y),e.addEventListener("mouseleave",T),u=o(e)):(b(),v())),a=!0};A();const C=t(A);return()=>{C.disconnect(),b(),e&&(e.removeEventListener("click",j),e.removeEventListener("mouseenter",y),e.removeEventListener("mouseleave",T))}}),[c])}function L(e){c();const t=i(u()),n=i(a());if(e&&e!==document.documentElement){const r=s(e);return{top:Math.max(0,r.top),right:Math.min(n,r.right),bottom:Math.min(t,r.bottom),left:Math.max(0,r.left)}}return{top:0,right:n,bottom:t,left:0}}export{h as r,p as u};
