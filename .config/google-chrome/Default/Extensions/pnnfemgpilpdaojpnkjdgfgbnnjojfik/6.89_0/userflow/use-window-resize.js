import{r as e}from"./vendor.react.js";import{r as t}from"./vendor.react-dom.js";import{g as s,a,c as o,d as r}from"./stylesheets.js";import{a as n,i as d}from"./client-context.js";var l=new URL("iframe-reset.css",import.meta.url).href;const i=({testId:t,className:n,style:d,elRef:i,stylesheet:f,theme:u,onStylesheetsLoad:y,noIframe:w,noScroll:v,ariaHidden:E,children:h})=>{w=w||!1;const[p,N]=e.useState(null),S=u&&"userflowjs-theme-root",R=u&&s(u),{loaded:I}=a(p,w?null:l),{loaded:L}=a(p,f,u),{loaded:b}=o(p,u),j=u&&r(u),{loaded:H}=a(p,j,u,{uninstallOnUnmount:!0});return e.useEffect((()=>{y&&I&&L&&b&&H&&y(!0)}),[y,I,L,b,H]),w?e.createElement(m,{testId:t,className:n,style:d,rootClassName:S,rootStyle:R,elRef:i,onWinReady:N,noScroll:v,ariaHidden:E},h):e.createElement(c,{testId:t,className:n,style:d,rootClassName:S,rootStyle:R,elRef:i,onWinReady:N,noScroll:v,ariaHidden:E},h)},c=({testId:s,className:a,style:o,rootClassName:r,rootStyle:l,elRef:i,onWinReady:c,noScroll:m,ariaHidden:f,children:u})=>{const y=n(),[w,v]=e.useState(null);e.useLayoutEffect((()=>{if(!w)return;const{documentElement:e,body:t}=w.document;e.dir=d.dir();const s=r&&r.split(" ");if(s&&t.classList.add(...s),l)for(const a in l)t.style.setProperty(a,l[a]);return t.style.overflow=m?"hidden":"",()=>{s&&t.classList.remove(...s)}}),[w,r,l,m]);const E=y?.logrocketAppId;e.useRef(!1),e.useEffect((()=>{}),[w,E]);return e.createElement("iframe",{ref:e=>{if(!e)return;i&&(i.current=e);const t=e.contentWindow;if(!t||t===w)return;const s=e=>{v(e),c(e)};"complete"===t.document.readyState?s(t):t.addEventListener("load",(()=>{s(t)}))},"data-testid":s,role:"presentation","aria-hidden":f?"true":void 0,tabIndex:f?-1:void 0,className:a,style:o,frameBorder:0,bis_size:"{}"},w&&t.createPortal(u,w.document.body))},m=({testId:t,className:s,style:a,rootClassName:o,rootStyle:r,elRef:n,onWinReady:l,ariaHidden:i,children:c})=>(e.useEffect((()=>{l(window)}),[l]),e.createElement("div",{ref:n,"data-testid":t,"aria-hidden":i?"true":void 0,tabIndex:i?-1:void 0,dir:d.dir(),className:s,style:a},e.createElement("div",{className:o,style:r},c)));function f(t){e.useLayoutEffect((()=>{let e;const s=()=>{window.cancelAnimationFrame(e),e=window.requestAnimationFrame(t)};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s),window.cancelAnimationFrame(e)}}),[t])}export{i as F,f as u};
