import{r as e}from"./vendor.react.js";import{r as t}from"./vendor.react-dom.js";import{u as n,i as s,U as i}from"./client-context.js";import{_ as o,B as r,R as a,U as c}from"./userflow.js";import{I as l}from"./vendor.react-i18next.js";import"./vendor.object-assign.js";import"./vendor.scheduler.js";import"./vendor.i18next.js";import"./vendor.phoenix.js";import"./vendor.uuid.js";import"./vendor.babel.runtime.js";const u=e.lazy((()=>o((()=>import("./ElementSelectionApp.js")),[new URL("ElementSelectionApp.js",import.meta.url).toString(),new URL("vendor.react.js",import.meta.url).toString(),new URL("vendor.object-assign.js",import.meta.url).toString(),new URL("vendor.is-hotkey.js",import.meta.url).toString(),new URL("vendor.obj-str.js",import.meta.url).toString(),new URL("flow-condition-types.js",import.meta.url).toString(),new URL("userflow.js",import.meta.url).toString(),new URL("vendor.phoenix.js",import.meta.url).toString(),new URL("vendor.uuid.js",import.meta.url).toString(),new URL("vendor.date-fns.js",import.meta.url).toString(),new URL("client-context.js",import.meta.url).toString(),new URL("vendor.i18next.js",import.meta.url).toString(),new URL("vendor.react-i18next.js",import.meta.url).toString(),new URL("vendor.babel.runtime.js",import.meta.url).toString(),new URL("use-window-resize.js",import.meta.url).toString(),new URL("vendor.react-dom.js",import.meta.url).toString(),new URL("vendor.scheduler.js",import.meta.url).toString(),new URL("stylesheets.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-regular-svg-icons.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-solid-svg-icons.js",import.meta.url).toString(),new URL("BuilderBar.js",import.meta.url).toString(),new URL("logomark.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-light-svg-icons.js",import.meta.url).toString()]))),m=e.lazy((()=>o((()=>import("./FlowApp.js")),[new URL("FlowApp.js",import.meta.url).toString(),new URL("vendor.react.js",import.meta.url).toString(),new URL("vendor.object-assign.js",import.meta.url).toString(),new URL("userflow.js",import.meta.url).toString(),new URL("vendor.phoenix.js",import.meta.url).toString(),new URL("vendor.uuid.js",import.meta.url).toString(),new URL("BubbleToolbar.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-regular-svg-icons.js",import.meta.url).toString(),new URL("stylesheets.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-solid-svg-icons.js",import.meta.url).toString(),new URL("flow-condition-types.js",import.meta.url).toString(),new URL("vendor.date-fns.js",import.meta.url).toString(),new URL("client-context.js",import.meta.url).toString(),new URL("vendor.i18next.js",import.meta.url).toString(),new URL("vendor.react-i18next.js",import.meta.url).toString(),new URL("vendor.babel.runtime.js",import.meta.url).toString(),new URL("bubble-frame.styl.js",import.meta.url).toString(),new URL("vendor.obj-str.js",import.meta.url).toString(),new URL("FlowChrome.js",import.meta.url).toString(),new URL("use-window-resize.js",import.meta.url).toString(),new URL("vendor.react-dom.js",import.meta.url).toString(),new URL("vendor.scheduler.js",import.meta.url).toString(),new URL("flow-host.styl.js",import.meta.url).toString(),new URL("logomark.js",import.meta.url).toString(),new URL("use-selector-element-monitoring.js",import.meta.url).toString(),new URL("Trigger.js",import.meta.url).toString()]))),d=e.lazy((()=>o((()=>import("./ChecklistApp.js")),[new URL("ChecklistApp.js",import.meta.url).toString(),new URL("vendor.react.js",import.meta.url).toString(),new URL("vendor.object-assign.js",import.meta.url).toString(),new URL("userflow.js",import.meta.url).toString(),new URL("vendor.phoenix.js",import.meta.url).toString(),new URL("vendor.uuid.js",import.meta.url).toString(),new URL("FlowChrome.js",import.meta.url).toString(),new URL("use-window-resize.js",import.meta.url).toString(),new URL("vendor.react-dom.js",import.meta.url).toString(),new URL("vendor.scheduler.js",import.meta.url).toString(),new URL("stylesheets.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-regular-svg-icons.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-solid-svg-icons.js",import.meta.url).toString(),new URL("flow-condition-types.js",import.meta.url).toString(),new URL("vendor.date-fns.js",import.meta.url).toString(),new URL("client-context.js",import.meta.url).toString(),new URL("vendor.i18next.js",import.meta.url).toString(),new URL("vendor.react-i18next.js",import.meta.url).toString(),new URL("vendor.babel.runtime.js",import.meta.url).toString(),new URL("flow-host.styl.js",import.meta.url).toString(),new URL("bubble-frame.styl.js",import.meta.url).toString(),new URL("vendor.obj-str.js",import.meta.url).toString(),new URL("logomark.js",import.meta.url).toString(),new URL("use-selector-element-monitoring.js",import.meta.url).toString(),new URL("ChecklistUI.js",import.meta.url).toString(),new URL("BubbleToolbar.js",import.meta.url).toString()]))),p=e.lazy(r),E=e.lazy(a),S=e.lazy((()=>o((()=>import("./LauncherApp.js")),[new URL("LauncherApp.js",import.meta.url).toString(),new URL("vendor.react.js",import.meta.url).toString(),new URL("vendor.object-assign.js",import.meta.url).toString(),new URL("userflow.js",import.meta.url).toString(),new URL("vendor.phoenix.js",import.meta.url).toString(),new URL("vendor.uuid.js",import.meta.url).toString(),new URL("use-selector-element-monitoring.js",import.meta.url).toString(),new URL("flow-condition-types.js",import.meta.url).toString(),new URL("vendor.date-fns.js",import.meta.url).toString(),new URL("bubble-frame.styl.js",import.meta.url).toString(),new URL("stylesheets.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-regular-svg-icons.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-solid-svg-icons.js",import.meta.url).toString(),new URL("client-context.js",import.meta.url).toString(),new URL("vendor.i18next.js",import.meta.url).toString(),new URL("vendor.react-i18next.js",import.meta.url).toString(),new URL("vendor.babel.runtime.js",import.meta.url).toString(),new URL("vendor.obj-str.js",import.meta.url).toString(),new URL("flow-host.styl.js",import.meta.url).toString(),new URL("FlowChrome.js",import.meta.url).toString(),new URL("use-window-resize.js",import.meta.url).toString(),new URL("vendor.react-dom.js",import.meta.url).toString(),new URL("vendor.scheduler.js",import.meta.url).toString(),new URL("logomark.js",import.meta.url).toString(),new URL("BubbleToolbar.js",import.meta.url).toString(),new URL("Trigger.js",import.meta.url).toString()]))),h=e.lazy((()=>o((()=>import("./NotificationsApp.js")),[new URL("NotificationsApp.js",import.meta.url).toString(),new URL("vendor.react.js",import.meta.url).toString(),new URL("vendor.object-assign.js",import.meta.url).toString(),new URL("client-context.js",import.meta.url).toString(),new URL("vendor.i18next.js",import.meta.url).toString(),new URL("vendor.react-i18next.js",import.meta.url).toString(),new URL("vendor.babel.runtime.js",import.meta.url).toString(),new URL("flow-host.styl.js",import.meta.url).toString(),new URL("userflow.js",import.meta.url).toString(),new URL("vendor.phoenix.js",import.meta.url).toString(),new URL("vendor.uuid.js",import.meta.url).toString(),new URL("stylesheets.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-regular-svg-icons.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-solid-svg-icons.js",import.meta.url).toString(),new URL("flow-condition-types.js",import.meta.url).toString(),new URL("vendor.date-fns.js",import.meta.url).toString()]))),f=e.lazy((()=>o((()=>import("./TrackerTestingApp.js")),[new URL("TrackerTestingApp.js",import.meta.url).toString(),new URL("vendor.react.js",import.meta.url).toString(),new URL("vendor.object-assign.js",import.meta.url).toString(),new URL("client-context.js",import.meta.url).toString(),new URL("vendor.i18next.js",import.meta.url).toString(),new URL("vendor.react-i18next.js",import.meta.url).toString(),new URL("vendor.babel.runtime.js",import.meta.url).toString(),new URL("BuilderBar.js",import.meta.url).toString(),new URL("use-window-resize.js",import.meta.url).toString(),new URL("vendor.react-dom.js",import.meta.url).toString(),new URL("vendor.scheduler.js",import.meta.url).toString(),new URL("stylesheets.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-regular-svg-icons.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-solid-svg-icons.js",import.meta.url).toString(),new URL("userflow.js",import.meta.url).toString(),new URL("vendor.phoenix.js",import.meta.url).toString(),new URL("vendor.uuid.js",import.meta.url).toString(),new URL("flow-condition-types.js",import.meta.url).toString(),new URL("vendor.date-fns.js",import.meta.url).toString(),new URL("logomark.js",import.meta.url).toString(),new URL("vendor.obj-str.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-light-svg-icons.js",import.meta.url).toString()]))),_=e.lazy((()=>o((()=>import("./StartConditionTestingApp.js")),[new URL("StartConditionTestingApp.js",import.meta.url).toString(),new URL("vendor.react.js",import.meta.url).toString(),new URL("vendor.object-assign.js",import.meta.url).toString(),new URL("client-context.js",import.meta.url).toString(),new URL("vendor.i18next.js",import.meta.url).toString(),new URL("vendor.react-i18next.js",import.meta.url).toString(),new URL("vendor.babel.runtime.js",import.meta.url).toString(),new URL("BuilderBar.js",import.meta.url).toString(),new URL("use-window-resize.js",import.meta.url).toString(),new URL("vendor.react-dom.js",import.meta.url).toString(),new URL("vendor.scheduler.js",import.meta.url).toString(),new URL("stylesheets.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-regular-svg-icons.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-solid-svg-icons.js",import.meta.url).toString(),new URL("userflow.js",import.meta.url).toString(),new URL("vendor.phoenix.js",import.meta.url).toString(),new URL("vendor.uuid.js",import.meta.url).toString(),new URL("flow-condition-types.js",import.meta.url).toString(),new URL("vendor.date-fns.js",import.meta.url).toString(),new URL("logomark.js",import.meta.url).toString(),new URL("vendor.obj-str.js",import.meta.url).toString(),new URL("vendor.fortawesome.pro-light-svg-icons.js",import.meta.url).toString()]))),k=()=>{const t=n(),[s,i]=e.useState(t.getSessionStorageState()),[o,r]=e.useState((()=>v()?null:t.flowSession)),[a,c]=e.useState(t.checklistSession),[l,k]=e.useState(t.checklistExpanded),[b,y]=e.useState(t.bannerSession),[C,g]=e.useState(t.resourceCenterSession),[j,A]=e.useState(t.resourceCenterOpen),[w,T]=e.useState(t.resourceCenterLauncherHidden),[L,I]=e.useState(t.resourceCenterEmbedsChecklist()),[O,z]=e.useState(t.launcherSessions),[x,P]=e.useState(t.activeLauncherFlowId),[R,D]=e.useState(t.notifications);e.useEffect((()=>{const e=()=>{i(t.getSessionStorageState()),r((e=>v()&&t.flowSession?.id!==e?.id?null:t.flowSession)),c(t.checklistSession),k(t.checklistExpanded),y(t.bannerSession),g(t.resourceCenterSession),A(t.resourceCenterOpen),T(t.resourceCenterLauncherHidden),I(t.resourceCenterEmbedsChecklist()),z(t.launcherSessions),P(t.activeLauncherFlowId),D(t.notifications)};t.on("uistatechange",e);const n=()=>{v()||r(t.flowSession)};return document.addEventListener("visibilitychange",n),()=>{t.off("uistatechange",e),document.removeEventListener("visibilitychange",n)}}),[t]);const V=!s.activeApp&&!!o;return e.useLayoutEffect((()=>{if(V)return t.emit("flowvisibilitychange",!0),()=>{t.emit("flowvisibilitychange",!1)}}),[t,V]),"elementSelection"===s.activeApp&&s.elementSelection?e.createElement(e.Suspense,{fallback:null},e.createElement(u,{state:s.elementSelection})):"trackerTesting"===s.activeApp&&s.trackerTesting?e.createElement(e.Suspense,{fallback:null},e.createElement(f,{state:s.trackerTesting})):e.createElement(e.Fragment,null,o&&e.createElement(e.Suspense,{fallback:null},e.createElement(m,{key:o.id,session:o,checklistSession:a,resourceCenterEmbedsChecklist:L})),a&&!L&&(l||a.version.checklist?.launcherEnabled)&&e.createElement(e.Suspense,{fallback:null},e.createElement(d,{key:a.id,session:a,checklistExpanded:l})),b&&e.createElement(e.Suspense,{fallback:null},e.createElement(p,{key:b.id,session:b})),C&&(j||!w)&&e.createElement(e.Suspense,{fallback:null},e.createElement(E,{key:C.id,session:C,isOpen:j,flowSession:o,checklistSession:a})),e.createElement(e.Suspense,{fallback:null},O.map((t=>e.createElement(S,{key:t.flow.id,session:t,active:t.flow.id===x})))),R.length>0&&e.createElement(e.Suspense,{fallback:null},e.createElement(h,{notifications:R})),"startConditionTesting"===s.activeApp&&s.testStartConditionToken&&e.createElement(e.Suspense,{fallback:null},e.createElement(_,{token:s.testStartConditionToken})))};function v(){return"hidden"===document.visibilityState}const b=({client:t})=>e.createElement(l,{i18n:s},e.createElement(i.Provider,{value:t},e.createElement(k,null)));class y{constructor(e){this.client=e}mount(){if(this.container)throw new c("UI has already been mounted");this.container=document.createElement("div"),this.container.id="userflow-ui",document.body.appendChild(this.container),t.render(e.createElement(b,{client:this.client}),this.container)}unmount(){this.container&&(t.unmountComponentAtNode(this.container),document.body.contains(this.container)&&document.body.removeChild(this.container),delete this.container)}}export{y as RealUI};
